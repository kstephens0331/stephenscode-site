[debug] [2025-05-24T14:58:51.949Z] ----------------------------------------------------------------------
[debug] [2025-05-24T14:58:51.951Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\usmc3\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-05-24T14:58:51.951Z] CLI Version:   14.3.0
[debug] [2025-05-24T14:58:51.952Z] Platform:      win32
[debug] [2025-05-24T14:58:51.953Z] Node Version:  v22.15.0
[debug] [2025-05-24T14:58:51.953Z] Time:          Sat May 24 2025 09:58:51 GMT-0500 (Central Daylight Time)
[debug] [2025-05-24T14:58:51.953Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-05-24T14:58:52.095Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-05-24T14:58:52.096Z] > authorizing via signed-in user (info@stephenscode.dev)
[debug] [2025-05-24T14:58:52.096Z] [iam] checking project admin-dashboard-stephenscode for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-05-24T14:58:52.096Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:52.097Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:52.097Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/admin-dashboard-stephenscode:testIamPermissions [none]
[debug] [2025-05-24T14:58:52.097Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/admin-dashboard-stephenscode:testIamPermissions x-goog-quota-user=projects/admin-dashboard-stephenscode
[debug] [2025-05-24T14:58:52.097Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/admin-dashboard-stephenscode:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-05-24T14:58:52.276Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/admin-dashboard-stephenscode:testIamPermissions 200
[debug] [2025-05-24T14:58:52.276Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/admin-dashboard-stephenscode:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-05-24T14:58:52.276Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:52.276Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:52.276Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/admin-dashboard-stephenscode/serviceAccounts/admin-dashboard-stephenscode@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-05-24T14:58:52.276Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/admin-dashboard-stephenscode/serviceAccounts/admin-dashboard-stephenscode@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-05-24T14:58:52.421Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/admin-dashboard-stephenscode/serviceAccounts/admin-dashboard-stephenscode@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-05-24T14:58:52.421Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/admin-dashboard-stephenscode/serviceAccounts/admin-dashboard-stephenscode@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'admin-dashboard-stephenscode'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] +  functions: Finished running predeploy script. 
[debug] [2025-05-24T14:58:52.778Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:52.778Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:52.778Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudresourcemanager.googleapis.com [none]
[debug] [2025-05-24T14:58:52.778Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudresourcemanager.googleapis.com x-goog-quota-user=projects/admin-dashboard-stephenscode
[debug] [2025-05-24T14:58:53.043Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudresourcemanager.googleapis.com 200
[debug] [2025-05-24T14:58:53.043Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudresourcemanager.googleapis.com [omitted]
[debug] [2025-05-24T14:58:53.044Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.044Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.044Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/admin-dashboard-stephenscode [none]
[debug] [2025-05-24T14:58:53.145Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/admin-dashboard-stephenscode 200
[debug] [2025-05-24T14:58:53.145Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/admin-dashboard-stephenscode {"projectNumber":"265435005798","projectId":"admin-dashboard-stephenscode","lifecycleState":"ACTIVE","name":"admin-dashboard-stephenscode","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-05-23T23:32:36.583872Z","parent":{"type":"organization","id":"396576915983"}}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-05-24T14:58:53.148Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.148Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.148Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.148Z] Checked if tokens are valid: true, expires at: 1748100693586
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-05-24T14:58:53.149Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.149Z] Checked if tokens are valid: true, expires at: 1748100693586
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-05-24T14:58:53.149Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.149Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.149Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudfunctions.googleapis.com [none]
[debug] [2025-05-24T14:58:53.149Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/admin-dashboard-stephenscode
[debug] [2025-05-24T14:58:53.150Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/runtimeconfig.googleapis.com [none]
[debug] [2025-05-24T14:58:53.150Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/admin-dashboard-stephenscode
[debug] [2025-05-24T14:58:53.153Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudbuild.googleapis.com [none]
[debug] [2025-05-24T14:58:53.153Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudbuild.googleapis.com x-goog-quota-user=projects/admin-dashboard-stephenscode
[debug] [2025-05-24T14:58:53.154Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/artifactregistry.googleapis.com [none]
[debug] [2025-05-24T14:58:53.154Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/artifactregistry.googleapis.com x-goog-quota-user=projects/admin-dashboard-stephenscode
[debug] [2025-05-24T14:58:53.300Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudfunctions.googleapis.com 200
[debug] [2025-05-24T14:58:53.300Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-05-24T14:58:53.349Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/runtimeconfig.googleapis.com 200
[debug] [2025-05-24T14:58:53.349Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-05-24T14:58:53.373Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/artifactregistry.googleapis.com 200
[debug] [2025-05-24T14:58:53.373Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-05-24T14:58:53.406Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudbuild.googleapis.com 200
[debug] [2025-05-24T14:58:53.406Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/admin-dashboard-stephenscode/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-05-24T14:58:53.407Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.407Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.407Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/adminSdkConfig [none]
[debug] [2025-05-24T14:58:53.616Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/adminSdkConfig 200
[debug] [2025-05-24T14:58:53.616Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/adminSdkConfig {"projectId":"admin-dashboard-stephenscode","storageBucket":"admin-dashboard-stephenscode.firebasestorage.app"}
[debug] [2025-05-24T14:58:53.617Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.617Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.617Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/configs [none]
[debug] [2025-05-24T14:58:53.785Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/configs 200
[debug] [2025-05-24T14:58:53.785Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/configs {"configs":[{"name":"projects/admin-dashboard-stephenscode/configs/sendgrid"}]}
[debug] [2025-05-24T14:58:53.786Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.786Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.786Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/configs/sendgrid/variables [none]
[debug] [2025-05-24T14:58:53.885Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/configs/sendgrid/variables 200
[debug] [2025-05-24T14:58:53.885Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/configs/sendgrid/variables {"variables":[{"name":"projects/admin-dashboard-stephenscode/configs/sendgrid/variables/key","updateTime":"2025-05-24T14:54:11.990362389Z"}]}
[debug] [2025-05-24T14:58:53.886Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.886Z] Checked if tokens are valid: true, expires at: 1748100693586
[debug] [2025-05-24T14:58:53.886Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/configs/sendgrid/variables/key [none]
[debug] [2025-05-24T14:58:53.987Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/configs/sendgrid/variables/key 200
[debug] [2025-05-24T14:58:53.987Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/admin-dashboard-stephenscode/configs/sendgrid/variables/key {"name":"projects/admin-dashboard-stephenscode/configs/sendgrid/variables/key","updateTime":"2025-05-24T14:54:11.990362389Z","text":"YOUR_SENDGRID_API_KEY"}
[debug] [2025-05-24T14:58:53.994Z] Validating nodejs source
[debug] [2025-05-24T14:58:54.587Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "echo 'Skipping lint for now'",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "@sendgrid/mail": "^8.1.5",
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^3.22.0"
  },
  "devDependencies": {
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-05-24T14:58:54.587Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-05-24T14:58:54.588Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-05-24T14:58:54.593Z] Found firebase-functions binary at 'C:\Users\usmc3\OneDrive\Documents\stephenscode-site\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8879

[error] API key does not start with "SG.".

[error] TypeError: functions.pubsub.schedule is not a function
    at Object.<anonymous> (C:\Users\usmc3\OneDrive\Documents\stephenscode-site\functions\index.js:8:45)
    at Module._compile (node:internal/modules/cjs/loader:1730:14)
    at Object..js (node:internal/modules/cjs/loader:1895:10)
    at Module.load (node:internal/modules/cjs/loader:1465:32)
    at Function._load (node:internal/modules/cjs/loader:1282:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
    at Module.require (node:internal/modules/cjs/loader:1487:12)
    at require (node:internal/modules/helpers:135:16)
    at loadModule (C:\Users\usmc3\OneDrive\Documents\stephenscode-site\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2025-05-24T14:58:55.097Z] Got response code 400; body Failed to generate manifest from function source: TypeError: functions.pubsub.schedule is not a function
